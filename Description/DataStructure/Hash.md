## **ğŸ’¡ Hash**  

ì—°ê²° ë¦¬ìŠ¤íŠ¸ì— ë¹„í•´ ê²€ìƒ‰ & ì¶”ê°€ & ì œê±° & ìˆ˜ì •ì˜ ì‹œê°„ë³µì¡ë„ íš¨ìœ¨ì´ ì¢‹ì€ ìë£Œêµ¬ì¡°ì¸ í‚¤ & ê°’ ê¸°ë°˜ì˜ Hash

Hash -> Key & Value Arrayì˜ êµ¬ì¡°ë¡œ ê°€ì •í•¨

í•´ì‹œëŠ” ì‚¬ì‹¤ìƒ ë°°ì—´ 1ê°œë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.

<br>

### **Hashì˜ ë©”ì„œë“œ**

- ì‹œê°„ë³µì¡ë„ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆëŠ” ë©”ì„œë“œë“¤
  - add()
  - remove(0
  - lookup() / find() / contains()
  - change()
- ì‹œê°„ë³µì¡ë„ê°€ ìµœì†Œ O(n)ì´ ê±¸ë¦´ìˆ˜ ë°–ì— ì—†ëŠ” ë©”ì„œë“œë“¤
  - all entries
  - all keys
  - all values
- Hashì—ì„  ì‹œê°„ë³µì¡ë„ê°€ O(1)ì´ì§€ë§Œ ì—°ê²° ë¦¬ìŠ¤íŠ¸ì—ì„  O(n)ì´ë˜ ë©”ì„œë“œë“¤
  - size()
  - isEmpty()
  - isFull()
  - loadFactor()

```java
public static void main(String[] args) {
    // Map ì„ ì–¸
	HashMap<String, Integer> map = new HashMap<String, Integer>();
	
    // Map ì•ˆì— ê°’ ë„£ê¸°
    // Mapì˜ KeyëŠ” ì¤‘ë³µ ë¶ˆê°€, ë™ì¼í•œ Keyì— ë‹¤ë¥¸ ê°’ì„ ë„£ì„ ê²½ìš° ìµœê·¼ì— ë„£ì€ ê°’ ì ìš©
	map.put("Soraka", 450);
	map.put("Garen", 4800); 
	map.put("Garen", 1350);
	
     // Keyë¥¼ ì‚¬ìš©í•˜ì—¬ Map ì•ˆì˜ ê°’ ê°€ì ¸ì˜¤ê¸°
	System.out.println("Map Value : " + map.get("Garen")); 
    // ë§µ í¬ê¸° í™•ì¸
	System.out.println("Map size : " + map.size());
	
    // Key ê°’ì˜ ë‚´ìš©ì„ ë³€ê²½
	map.replace("Garen", 450);
	System.out.println("Garen Value : " + map.get("Garen")); 
	
    // Key, Valueê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
	System.out.println("Key Exist : " + map.containsKey("Garen"));
   	System.out.println("Value Exist : " + map.containsValue(450));
	
    // Mapì˜ í¬ê¸°ê°€ 0ì¸ì§€ í™•ì¸
	System.out.println("Map Empty : " + map.isEmpty());
	
    // keyì— í•´ë‹¹í•˜ëŠ” ê°’ ì‚­ì œ
	map.remove("Garen");
	map.put(null, 150);
	map.put("Garen", 450);
	
    // í‚¤ê°€ ìˆìœ¼ë©´ í‚¤ì˜ ê°’ ë°˜í™˜, ì—†ìœ¼ë©´ defaultë¡œ ì„¤ì •í•œ ê°’ ë°˜í™˜
	System.out.println
        ("Keyê°€ ìˆìœ¼ë©´ Value ì—†ìœ¼ë©´ default : " + map.getOrDefault("Ahri", 6300));
	
	// Keyê°€ ì—†ê±°ë‚˜ Valueê°€ nullì¼ ë•Œë§Œ ì‚½ì…
	map.putIfAbsent("Master Yi", 6300);
	map.putIfAbsent("Garen", 6300);
	System.out.println
        ("Keyê°€ ì—†ê±°ë‚˜ Valueê°€ nullì¼ ë•Œë§Œ ì‚½ì… : " + map.get("Master Yi"));
	System.out.println
        ("Keyê°€ ì—†ê±°ë‚˜ Valueê°€ nullì¼ ë•Œë§Œ ì‚½ì… : " + map.get("Garen"));
}
```

---

## ğŸ’¡ HashCode

ê°ì²´ì˜ ì£¼ì†Œê°’ì„ ë³€í™˜í•˜ì—¬ ìƒì„±ëœ ê°ì²´ì˜ ê³ ìœ í•œ ì •ìˆ˜ê°’ì´ë‹¤.

ë‘ ê°ì²´ê°€ ë™ì¼í•œ ê°ì²´ì¸ì§€ ë™ì¼ì„±ì„ ì²´í¬í•  ë•Œ ì‚¬ìš©í•œë‹¤.

<br>

ì•„ë˜ ì˜ˆì‹œì˜ person1ê³¼ person2ì˜ hashCodeëŠ” ë‹¹ì—°íˆ ë‹¤ë¥´ë‹¤.

hashCodeëŠ” ì£¼ì†Œê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ëœ ì •ìˆ˜ ê°’ì´ê¸° ë•Œë¬¸ì— 2,3ì˜ hashCodeëŠ” ë™ì¼í•˜ë‹¤.

```java
public class HashCode {
    public static void main(String[] args) {
        Person person1 = new Person("Kim");
        Person person2 = new Person(new String("Kim"));
        Person person3 = person2;

        System.out.println(person1.hashCode());
        System.out.println(person2.hashCode());
        System.out.println(person3.hashCode());
    }
}

class Person {
    String name;

    public Person(String name) {
        this.name = name;
    }

    @Override
    public boolean equals(Object obj) {
        Person anotherObj = (Person) obj;
        return (this.name.equals(anotherObj.name));
    }
}

// ê²°ê³¼ê°’
// 3565735997
// 1735600054
// 1735600054
```

<br>

### String í´ë˜ìŠ¤ì˜ hashCode()

Stringì€ ì¬ì •ì˜í•œ equals()ì—ì„œ ê° ë¬¸ìì—´ì—ì„œ í•œ ê¸€ìì”© ë¹„êµí•˜ëŠ” ë°©ì‹ì´ë‹¤.

ì•„ë˜ ì½”ë“œëŠ” ë¬¸ìì—´ì—ì„œ í•œê¸€ìì”© ê°€ì ¸ì™€ì„œ ì •ìˆ˜ê°’ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì •ìˆ˜ì™€ ë”í•˜ë©´
í•´ë‹¹ ê¸€ìì˜ ì•„ìŠ¤í‚¤ ì½”ë“œì˜ ê°’ì„ ì‚¬ìš©í•œë‹¤.

31ì„ ê³±í•˜ëŠ” ì´ìœ ëŠ” í™€ìˆ˜ì´ê¸° ë•Œë¬¸ì´ë‹¤.

ì§ìˆ˜ë¥¼ ê³±í–ˆì„ ë•Œ ì˜¤ë²„í”Œë¡œìš° ë˜ë©´ ì •ë³´ ì†ì‹¤ì´ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

ì´ì§„ìˆ˜ì—ì„œ 2ë¥¼ ê³±í•˜ë©´ ë¹„íŠ¸ê°€ ì™¼ìª½ìœ¼ë¡œ 1ì¹¸ì”© ì´ë™í•œë‹¤.

í™€ìˆ˜ ì¤‘ 31ì˜ ì¥ì ì€ **31 * iê°€ (i << 5) - i** ì™€ ê°™ê¸° ë•Œë¬¸ì— ê³±ì…ˆ ëŒ€ì‹  ë¹„íŠ¸ ì´ë™ ë° ëº„ì…ˆìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬
ì„±ëŠ¥ìƒ ì´ì ì´ ìˆê¸° ë–„ë¬¸ì´ë©°, ìš”ì¦˜ì€ VMì—ì„œ ìë™ìœ¼ë¡œ ìµœì í™”ë¥¼ í•´ì¤€ë‹¤.

ê²°ë¡ ì ìœ¼ë¡œ ì£¼ì†Œê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ìˆ˜ê°’ì˜ hashCodeë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, ì„œë¡œ ë‹¤ë¥¸ String ê°ì²´ë„
ë¬¸ìì—´ì´ ê°™ìœ¼ë©´ hashCodeê°€ ê°™ì€ ê²ƒì´ë‹¤.

```java
public int hashCode() {
    int h = hash;
    if (h == 0 && value.length > 0) {
        char val[] = value;
        
        for (int i=0; i<value.length; i++) {
            h = 31 * h + val[i];
        }
        hash = h;
    }
    return h;
}
```

---

### String í´ë˜ìŠ¤ì˜ hashCode()

Stringì€ ì¬ì •ì˜í•œ equals()ì—ì„œ ê° ë¬¸ìì—´ì—ì„œ í•œ ê¸€ìì”© ë¹„êµí•˜ëŠ” ë°©ì‹ì´ë‹¤.

ì•„ë˜ ì½”ë“œëŠ” ë¬¸ìì—´ì—ì„œ í•œê¸€ìì”© ê°€ì ¸ì™€ì„œ ì •ìˆ˜ê°’ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì •ìˆ˜ì™€ ë”í•˜ë©´
í•´ë‹¹ ê¸€ìì˜ ì•„ìŠ¤í‚¤ ì½”ë“œì˜ ê°’ì„ ì‚¬ìš©í•œë‹¤.

31ì„ ê³±í•˜ëŠ” ì´ìœ ëŠ” í™€ìˆ˜ì´ê¸° ë•Œë¬¸ì´ë‹¤.

ì§ìˆ˜ë¥¼ ê³±í–ˆì„ ë•Œ ì˜¤ë²„í”Œë¡œìš° ë˜ë©´ ì •ë³´ ì†ì‹¤ì´ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

ì´ì§„ìˆ˜ì—ì„œ 2ë¥¼ ê³±í•˜ë©´ ë¹„íŠ¸ê°€ ì™¼ìª½ìœ¼ë¡œ 1ì¹¸ì”© ì´ë™í•œë‹¤.

í™€ìˆ˜ ì¤‘ 31ì˜ ì¥ì ì€ **31 * iê°€ (i << 5) - i** ì™€ ê°™ê¸° ë•Œë¬¸ì— ê³±ì…ˆ ëŒ€ì‹  ë¹„íŠ¸ ì´ë™ ë° ëº„ì…ˆìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬
ì„±ëŠ¥ìƒ ì´ì ì´ ìˆê¸° ë–„ë¬¸ì´ë©°, ìš”ì¦˜ì€ VMì—ì„œ ìë™ìœ¼ë¡œ ìµœì í™”ë¥¼ í•´ì¤€ë‹¤.

ê²°ë¡ ì ìœ¼ë¡œ ì£¼ì†Œê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ìˆ˜ê°’ì˜ hashCodeë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, ì„œë¡œ ë‹¤ë¥¸ String ê°ì²´ë„
ë¬¸ìì—´ì´ ê°™ìœ¼ë©´ hashCodeê°€ ê°™ì€ ê²ƒì´ë‹¤.

```java
public int hashCode() {
    int h = hash;
    if (h == 0 && value.length > 0) {
        char val[] = value;
        
        for (int i=0; i<value.length; i++) {
            h = 31 * h + val[i];
        }
        hash = h;
    }
    return h;
}
```

---

## **ğŸ’¡ Hash Collision**

- ì„œë¡œ ë‹¤ë¥¸ ê°’ì˜ í‚¤ê°€ ì¼ì¹˜í•˜ëŠ” ê²½ìš°ë¥¼ ì˜ë¯¸í•œë‹¤
- ì¶©ëŒì´ ì¼ì–´ë‚˜ì§€ ì•Šê²Œ Folding í•˜ëŠ” ë°©ë²•
  - í•¨ìˆ˜ë¥¼ êµ¬í˜„í• ë•Œ ì¶©ëŒì„ í”¼í•˜ê³ ì í• ë•Œ ì–´ë–»ê²Œ ë¶„í¬ë¥¼ ë” ë„“ê²Œ í• ì§€ ìƒê°í•˜ê¸°
- ì•„ë˜ ì‚¬ì§„ì€ ì „í™”ë²ˆí˜¸ë¥¼ ë°›ì•„ì„œ 3ë¶„í• í•œ í•©ì„ í‚¤ ë°°ì—´ì— ì €ì¥í•˜ëŠ” ë„ì¤‘ Foldingì´ ë°œìƒí•œ ì‚¬ì§„ì´ë‹¤

<br>

ë²ˆí˜¸ë¥¼ 3ë¶„í• í•œê²ƒì˜ í•©ì„ í‚¤ë¡œ ì§€ì •, ì¶©ëŒ ë°œìƒ

![img](https://raw.githubusercontent.com/spacedustz/Obsidian-Image-Server/main/img/kub2.png) 

- hashCodeì—ì„œì˜ ì¶©ëŒë¬¸ì œë¥¼ í•´ê²°í•œ **ë¬¸ìì—´ í‘œí˜„**
- ë¬¸ìëŠ” ìœ ë‹ˆì½”ë“œë¡œ ë³€í™˜í•˜ì—¬ ìˆ«ìë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆê³ , ê° ë¬¸ìë¥¼ ë³€í™˜ í›„ ê·¸ ìˆ«ìë“¤ì„ í•©í•˜ë©´ ëœë‹¤
  í•˜ì§€ë§Œ ê·¸ë ‡ê²Œ í–ˆì„ ê²½ìš° ë‹¨ìˆœíˆ ë¬¸ìì˜ ìœ„ì¹˜ì™€ ê´€ê³„ì—†ì´ ê°™ì€ ë¬¸ìì—´ì´ ìˆë‹¤ë©´ **í•´ì‹œ ì¶©ëŒ**ì´ ë°œìƒí•œë‹¤
- ë¬¸ìì˜ ìœ„ì¹˜ì— ë”°ë¼ ìƒìˆ˜ gë¥¼ ê³±í•˜ëŠ” íšŸìˆ˜ë¥¼ ë‹¤ë¥´ê²Œ í•´ì„œ ì¶©ëŒ ë¬¸ì œ í•´ê²°
  - 116 + g(104 + g(105 + g(115)))

```java
    // ë¬¸ìì—´ì„ ê¸°ë°˜ìœ¼ë¡œ ì •ìˆ˜ë¥¼ ê³„ì‚°í•´ì£¼ëŠ” hashCode
    public int hashCode(String s) { // this ê°€ ì…ë ¥ìœ¼ë¡œ ë“¤ì–´ì˜¨ë‹¤ê³  ê°€ì •
        int g = 31;
        int hash = 0; // í‚¤ ë°°ì—´ì— ì €ì¥ë  ë°˜í™˜ê°’

        // ìƒìˆ˜ gë¥¼ ë¬¸ìì˜ ìœ„ì¹˜ë§Œí¼ ì œê³±í•œë’¤ ê³±í•œë‹¤
        for (int i=s.length()-1; i>=0; i--) { // s, i, h, t
            hash = g * hash + s.charAt(i);
        }
        return hash;
    }
```

<br>

ê°™ì€ ë¬¸ìì—´ì´ì§€ë§Œ ë¬¸ìì˜ ìœ„ì¹˜ì— ë”°ë¼ ë‹¤ë¥¸ ê²°ê³¼ê°’ ë°˜í™˜, ì¶©ëŒ ë¬¸ì œ í•´ê²°

![img](https://raw.githubusercontent.com/spacedustz/Obsidian-Image-Server/main/img/DataStructure_Hash_2.png)

<br>

### **Hash Collision ë°©ì§€ë¥¼ ìœ„í•œ í•´ì‹œ í¬ê¸° ìµœì í™”**

- ex 1: í•´ì‹œì˜ í¬ê¸°ë¥¼ í™€ìˆ˜ë¡œ ì„¤ì •í•˜ì—¬ % ì—°ì‚°ìë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ ë‹¤ì–‘í•œ ê²°ê³¼ê°€ ì¶œë ¥ë˜ë„ë¡ í•œë‹¤
  - hashCode() ì—ì„œ ë°˜í™˜ëœ ì •ìˆ˜ê°’ìœ¼ë¡œ ë°°ì—´ì˜ ì¸ë±ìŠ¤ê°’ìœ¼ë¡œ ì“¸ ìˆ˜ ìˆë„ë¡ ìµœì í™” (ì •ìˆ˜ëŠ” ìŒ&ì–‘ìˆ˜ ë‘˜ë‹¤ í•´ë‹¹ ê°€ëŠ¥)
  - í…Œì´ë¸” í¬ê¸° ìµœì í™” (í…Œì´ë¸”ì˜ í¬ê¸°ë¥¼ í™€ìˆ˜ & ì†Œìˆ˜ë¡œ ì„¤ì •)
- ex 2: í•´ì‹œì˜ í¬ê¸°ë¥¼ ì†Œìˆ˜ë¡œ ì„¤ì •í•˜ì—¬ ë‚˜ë¨¸ì§€ ê°’ì´ ë” ë‹¤ì–‘í•œ ê²°ê³¼ê°€ ì¶œë ¥ë˜ë„ë¡ í•¨
- í…Œì´ë¸” í¬ê¸°ë¥¼ ëŠ˜ë¦¬ëŠ”ê²ƒê³¼ ì™œ ì¶©ëŒì´ ë°œìƒí• ê¹Œ?
  - hashCodeëŠ” í‚¤ ê°’ì—ì„œ ì •ìˆ˜ê°’ì„ ê³„ì‚°í•˜ëŠ”ë° ì´ë•Œ í•´ì‹œ í…Œì´ë¸”ì˜ ê¸¸ì´ë¥¼ ë²—ì–´ë‚˜ì§€ ì•Šê¸° ìœ„í•´ì„œ
    í…Œì´ë¸” ê¸¸ì´ë¡œ í•´ì‹œí•¨ìˆ˜ì˜ ë¦¬í„´ê°’ì˜ ë‚˜ë¨¸ì§€ ì—°ì‚°í•œë‹¤
  - ì˜ˆë¥¼ ë“¤ì–´, í…Œì´ë¸”ì˜ í¬ê¸°ê°€ 6ì´ê³  íŠ¹ì • í•´ì‹œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆì„ë•Œ
    2ë°°ì˜ ë°°ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤ë©´ 2,4,6,8 ë“±ì„ ë°˜í™˜í•˜ëŠ”ë° ì´ê²ƒì„ í•´ì‹œ í…Œì´ë¸” ì‚¬ì´ì¦ˆì— ë§ê²Œ ì¡°ì •(%)í•˜ë©´
    **2%6** = 2 | **4%6** = 4 | **6%6** = 0 | **8%6** = 2 | **10%4** = 4 ë¡œ ë³€í•œë‹¤

![img](https://raw.githubusercontent.com/spacedustz/Obsidian-Image-Server/main/img/DataStructure_Hash_4.png) 

- ì´ë•Œ, í…Œì´ë¸”ì˜ í¬ê¸°ë¥¼ ì†Œìˆ˜ë¡œ ë§Œë“¤ë©´ ê°’ì´ ê· ë“±í•˜ê²Œ ë“¤ì–´ê°„ë‹¤
  (ì†Œìˆ˜ëŠ” 1ê³¼ ìê¸° ìì‹ ì„ ì œì™¸í•œ ìˆ˜ì˜ ë°°ìˆ˜ê°€ ë  ìˆ˜ ë°–ì— ì—†ê¸° ë•Œë¬¸)
- ë°°ìˆ˜ê°€ ë‚˜ì˜¤ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ìµœëŒ€í•œ ì¤„ì¼ë•Œ ì¶©ëŒì„ ìµœëŒ€í•œ ë°©ì§€í•  ìˆ˜ ìˆê²Œ ëœë‹¤
- í™€ìˆ˜ë¡œ ì„¤ì •í•˜ëŠ” ê²½ìš°ë„ ë§ˆì°¬ê°€ì§€ë¡œ ëª¨ë“  ì§ìˆ˜ëŠ” ìµœì†Œê³µì•½ìˆ˜ì¸ 2ë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸ì´ë‹¤

![img](https://raw.githubusercontent.com/spacedustz/Obsidian-Image-Server/main/img/DataStructure_Hash_3.png) 

<br>

### **2ì˜** **ë³´ìˆ˜ ì„±ì§ˆì„ ì´ìš©í•œ í•´ì‹œê°’ì˜ ì–‘ìˆ˜ ë³€í™˜**

- ë°°ì—´ì˜ ì¸ë±ìŠ¤ëŠ” ìŒìˆ˜ê°€ ë  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì–‘ìˆ˜ë¡œ ë³€í™˜ì„ í•´ì¤˜ì•¼ í•œë‹¤
- í•´ì‹œ ê²°ê³¼ê°’(ìŒìˆ˜)ê³¼ 0x7FFFFFFFë¥¼ Andì—°ì‚° í•´ì£¼ê³  ì–‘ìˆ˜ë¡œ ë³€í™˜ëœ ê°’ì— í…Œì´ë¸”ì˜ ì‚¬ì´ì¦ˆë¥¼ % í•˜ë©´ ë¨

```java
// dataì˜ index ê²°ì •
int hashval = data.hashCode(s);
hashval = hashval & ox7FFFFFFF;
hashval = hashval % tableSize;
```

<br>

### **loadFactor() - ì ì¬ìœ¨**

- í…Œì´ë¸”ì— ë°ì´í„°ê°€ ì–¼ë§ˆë‚˜ ìˆëŠ”ì§€ ì•Œë ¤ì£¼ëŠ” ë©”ì„œë“œ
- 0 = ë¹„ì–´ìˆë‹¤ / 1 = ê½‰ ì°¼ë‹¤